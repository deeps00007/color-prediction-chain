#  Ultimate Color Prediction Game (Blockchain + Supabase)

âš ï¸ **TESTNET ONLY - DO NOT USE WITH REAL MONEY**  
This is a demonstration project. Never deploy to mainnet without:
- Professional security audit
- Provably fair randomness (Chainlink VRF)
- Emergency pause mechanisms
- Comprehensive testing

---

A professional betting game where users bet ETH on colors.
- **Blockchain**: Holds funds & pays winners instantly (Trustless Payouts).
- **Backend**: Auto-resolves rounds every 30 seconds.
- **Supabase**: Real-time history & smooth UI data.

## ğŸ“‹ Prerequisites
- [Node.js](https://nodejs.org/) v16+ installed
- [MetaMask](https://metamask.io/) browser extension
- No prior blockchain experience needed!

## ğŸš€ Installation & Quick Start

**Everything is automated.** You don't need complex commands.

1.  **Download project**:
    Clone this repository or download the ZIP.

2.  **Install Dependencies** (First time only):
    Open a terminal in this folder and run:
    ```bash
    npm install
    cd game-backend && npm install
    cd ..
    ```

3.  **Start Everything**:
    Double-click **`START_ALL.bat`** in this folder.
    *(This starts the Blockchain, Deploys contract, and Starts the Backend engine)*

4.  **Play**:
    Open `game-frontend/index.html` in your browser.

5.  **Connect Wallet**:
    - Network: **Localhost 8545**
    - **Import Account**:
        1. Look at the "Hardhat Blockchain" terminal window.
        2. Find "Account #0: 0x...".
        3. Copy the **Private Key** below it (not the address).
        4. Open MetaMask -> Click Circle Icon -> Import Account -> Paste Private Key.
        5. You'll have 10,000 test ETH to play with!

---

## ğŸ“¸ Visuals & Architecture

### Architecture
```mermaid
graph TD
    User[User/Frontend] <-->|Bets ETH| Contract[Smart Contract (House)]
    User <-->|Views History| Supabase[Supabase DB]
    Backend[Game Backend] -->|Resolves Round| Contract
    Backend -->|Updates Stats| Supabase
    Contract -->|Pays Winners| User
```

**(Add Screenshots of the Game UI here)**

---

## ğŸ² How It Works

1.  **You Place a Bet** 
    - You select **RED (2x)**, **GREEN (2x)**, or **VIOLET (5x)**.
    - Your ETH goes directly into the **Smart Contract**.
    - The contract locks your money safely.

2.  **The Round Ends** 
    - The **Game Backend** watches the clock (30 seconds per round).
    - When time is up, it generates a result.

3.  **You Get Paid** 
    - The Backend commands the Smart Contract to `resolveRound()`.
    - The Contract checks if you won.
    - **If you won:** The Contract INSTANTLY sends ETH to your wallet.
    - **If you lost:** The ETH stays in the house pool.

### Result Generation Transparency
Currently, results are generated by the backend using:
- JavaScript's `Math.random()` (âš ï¸ **NOT** cryptographically secure)
- **Future Improvement**: Integrate Chainlink VRF for provable fairness.

*Users must trust that the backend operator is honest in this demo version.*

---

## ğŸ› ï¸ Tech Stack
- **Smart Contracts**: Solidity, Hardhat
- **Blockchain**: Ethereum (Local: Hardhat Network)
- **Frontend**: HTML, CSS, JavaScript, ethers.js
- **Backend**: Node.js, Express
- **Database**: Supabase (PostgreSQL)

---

## ğŸ“‚ Project Structure

- **`contracts/ColorPrediction.sol`**:
    The Smart Contract (The "Bank"). Handles betting logic and payouts.
    
- **`game-frontend/`**:
    The website (UI). Connects to Blockchain and Supabase.

- **`game-backend/`**:
    The brain. Runs the game loop, decides winners, and updates the database.

- **`scripts/`**:
    Helper scripts.
    - `fundContract.js`: Automagically adds 5,000 ETH to the contract so it can pay out big wins.

---

## ğŸ›¡ï¸ Security Considerations
âš ï¸ **This is an educational project.** Known limitations:
1. **Centralized Randomness**: The backend controls the results.
2. **No cryptographic fairness proof**: A malicious backend could rig the game.
3. **Single point of failure**: If the backend server dies, rounds stop processing.
4. **Max bet limit**: The 100 ETH limit is enforced by the UI, but a direct smart contract call could bypass it.

**For Production:**
- Use Chainlink VRF for randomness.
- Implement multi-signature controls.
- Get a professional audit.
- Use decentralized resolver nodes (Keepers).

---

## ğŸ”§ Troubleshooting

**"Transaction reverted" or Payout issues?**
- Is `START_ALL.bat` running? (Keep the black windows open!)
- Did you reset MetaMask? (Settings -> Advanced -> Reset Activity).

**"Contract Empty"?**
Run this to give the house more money:
```bash
npx hardhat run scripts/fundContract.js --network localhost
```

**Changing Settings**
Check `.env` files in `game-backend/` to change round time.

---

## â“ FAQ

**Q: Is this real money?**  
A: **No!** This uses Hardhat's local blockchain with fake test ETH.

**Q: Can I lose my bet?**  
A: Yes, like any betting game. Only bet what you can afford to lose (even fake money ğŸ˜„).

**Q: How do I know the game is fair?**  
A: Currently, you must trust the backend operator. See "Security Notes" for limitations.

**Q: Can I deploy this to real Ethereum?**  
A: Technically yes, but **DO NOT** without major security improvements and legal consultation.

---

## ğŸ“œ License & Disclaimer
**License**: MIT License.

**Disclaimer**: This project is for **EDUCATIONAL PURPOSES ONLY**. Gambling may be illegal in your jurisdiction. The developers assume no liability for misuse.


